"use strict";module.exports=function(e){var i=require("bluebird"),n=require("%PathToCoreWebclientModule%/js/App.js");if(n.getUserRole()===Enums.UserRole.SuperAdmin||n.getUserRole()===Enums.UserRole.TenantAdmin){var t=require("underscore"),s=require("%PathToCoreWebclientModule%/js/utils/Text.js"),u=require("modules/%ModuleName%/js/Cache.js"),a=require("modules/%ModuleName%/js/Settings.js"),r=[],o=[],l=[],m=[];return a.init(e),u.init(e),{start:function(){n.getUserRole()===Enums.UserRole.SuperAdmin&&(l.push({GetTabView:function(e){require.ensure(["modules/%ModuleName%/js/views/DbAdminSettingsView.js"],function(){e(require("modules/%ModuleName%/js/views/DbAdminSettingsView.js"))},"admin-bundle")},TabName:a.HashModuleName+"-db",TabTitle:s.i18n("%MODULENAME%/LABEL_DB_SETTINGS_TAB")}),l.push({GetTabView:function(e){require.ensure(["modules/%ModuleName%/js/views/SecurityAdminSettingsView.js"],function(){e(require("modules/%ModuleName%/js/views/SecurityAdminSettingsView.js"))},"admin-bundle")},TabName:a.HashModuleName+"-security",TabTitle:s.i18n("%MODULENAME%/LABEL_SECURITY_SETTINGS_TAB")}),l.push({GetTabView:function(e){require.ensure(["modules/%ModuleName%/js/views/AboutAdminSettingsView.js"],function(){e(require("modules/%ModuleName%/js/views/AboutAdminSettingsView.js"))},"admin-bundle")},TabName:"about",TabTitle:s.i18n("%MODULENAME%/LABEL_ABOUT_SETTINGS_TAB")})),l.push({GetTabView:function(e){require.ensure(["modules/%ModuleName%/js/views/CommonSettingsPaneView.js"],function(){e(require("modules/%ModuleName%/js/views/CommonSettingsPaneView.js"))},"admin-bundle")},TabName:"common",TabTitle:s.i18n("%MODULENAME%/LABEL_COMMON_SETTINGS_TAB")})},getScreens:function(){var e={};return e[a.HashModuleName]=function(){return new i(function(e,n){require.ensure(["modules/%ModuleName%/js/views/SettingsView.js"],function(n){var s=n("modules/%ModuleName%/js/EntitiesTabs.js");t.each(r,function(e){s.registerEntityType(e)}),t.each(o,function(e){s.changeEntityData(e)});var u=n("modules/%ModuleName%/js/views/SettingsView.js"),a=[];t.each(l,function(e){var i=u.registerTab(e.GetTabView,e.TabName,e.TabTitle);i&&a.push(i)}),i.all(a).then(function(){u.sortRegisterTabs(),e(u),t.each(m,function(e){u.registerTabSection(e.GetTabView,e.TabName,e.TabTitle)})},function(){u.sortRegisterTabs(),e(u),t.each(m,function(e){u.registerTabSection(e.GetTabView,e.TabName,e.TabTitle)})})},"admin-bundle")})},e},getHeaderItem:function(){return n.getUserRole()===Enums.UserRole.SuperAdmin?null:{item:require("modules/%ModuleName%/js/views/HeaderItemView.js"),name:a.HashModuleName}},getAbstractSettingsFormViewClass:function(){return require("modules/%ModuleName%/js/views/CAbstractSettingsFormView.js")},registerAdminPanelTab:function(e,i,n){l.push({GetTabView:e,TabName:i,TabTitle:n})},registerAdminPanelTabSection:function(e,i){m.push({GetTabView:e,TabName:i})},showEntities:function(e,i){var n=require("%PathToCoreWebclientModule%/js/Routing.js"),t=require("modules/%ModuleName%/js/utils/Links.js");n.setHash(t.get(e,i,""))},setAddHash:function(e){require("modules/%ModuleName%/js/views/SettingsView.js").setAddHash(e)},registerAdminPanelEntityType:function(e){r.push(e)},changeAdminPanelEntityData:function(e){o.push(e)},getKoSelectedTenantId:function(){return u.selectedTenantId},getTenantsObservable:function(){return u.tenants}}}return null};