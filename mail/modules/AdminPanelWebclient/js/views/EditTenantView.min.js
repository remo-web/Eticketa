"use strict";function GetAdditionalFieldValue(e,i){switch(e.FieldType){case"bool":return Types.pBool(i);case"int":return Types.pInt(i);default:return Types.pString(i)}}function ParseAdditionalFields(e){var i=Types.pArray(window.auroraAppData&&window.auroraAppData.additional_entity_fields_to_edit);return _.filter(i,function(i){return i.value=ko.observable(GetAdditionalFieldValue(i,"")),i.Entity===e})}function CEditTenantView(){this.id=ko.observable(0),this.name=ko.observable(""),this.description=ko.observable(""),this.webDomain=ko.observable(""),this.siteName=ko.observable(""),this.sHeading=TextUtils.i18n("%MODULENAME%/HEADING_CREATE_TENANT"),this.sActionCreate=TextUtils.i18n("COREWEBCLIENT/ACTION_CREATE"),this.sActionCreateInProgress=TextUtils.i18n("COREWEBCLIENT/ACTION_CREATE_IN_PROGRESS"),this.aAdditionalFields=ParseAdditionalFields("Tenant")}var _=require("underscore"),ko=require("knockout"),TextUtils=require("%PathToCoreWebclientModule%/js/utils/Text.js"),Types=require("%PathToCoreWebclientModule%/js/utils/Types.js"),Screens=require("%PathToCoreWebclientModule%/js/Screens.js");CEditTenantView.prototype.ViewTemplate="%ModuleName%_EditTenantView",CEditTenantView.prototype.getCurrentValues=function(){var e=[this.id(),this.name(),this.description(),this.webDomain(),this.siteName()];return _.each(this.aAdditionalFields,function(i){e.push(i.value())}),e},CEditTenantView.prototype.clearFields=function(){this.id(0),this.name(""),this.description(""),this.webDomain(""),this.siteName(""),_.each(this.aAdditionalFields,function(e){e.value(GetAdditionalFieldValue(e,""))})},CEditTenantView.prototype.parse=function(e,i){i?(this.id(e),this.name(i.Name),this.description(i.Description),this.webDomain(i.WebDomain),this.siteName(i.SiteName),_.each(this.aAdditionalFields,function(e){e.value(GetAdditionalFieldValue(e,i[e.FieldName])),e.EnableOnCreate=Types.pBool(e.EnableOnCreate,!0),e.EnableOnEdit=Types.pBool(e.EnableOnEdit,!0)})):this.clearFields()},CEditTenantView.prototype.isValidSaveData=function(){return""===$.trim(this.name())?(Screens.showError(TextUtils.i18n("%MODULENAME%/ERROR_TENANT_NAME_EMPTY")),!1):!/[\\\/\:\*\?\\\"\<\>\|]/gi.test(this.name())||(Screens.showError(TextUtils.i18n("%MODULENAME%/ERROR_TENANT_NAME_INVALID")),!1)},CEditTenantView.prototype.getParametersForSave=function(){var e={TenantId:this.id(),Name:this.name(),Description:this.description(),WebDomain:this.webDomain(),SiteName:this.siteName()};return _.each(this.aAdditionalFields,function(i){var t=i.value();"int"===i.FieldType&&(t=Types.pInt(t)),e[i.FieldName]=t}),e},module.exports=new CEditTenantView;