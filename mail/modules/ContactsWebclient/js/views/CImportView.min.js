"use strict";function CImportView(e){this.oJua=null,this.oParent=e,this.visibility=ko.observable(!1),this.importing=ko.observable(!1),this.importButtonDom=ko.observable(null),this.bVisibleCloseButton=App.isMobile(),this.extensionInfo=e.getFormatDependentText("INFO_IMPORT_CONTACTS")}var _=require("underscore"),ko=require("knockout"),App=require("%PathToCoreWebclientModule%/js/App.js"),CJua=require("%PathToCoreWebclientModule%/js/CJua.js"),UserSettings=require("%PathToCoreWebclientModule%/js/Settings.js"),Settings=require("modules/%ModuleName%/js/Settings.js");CImportView.prototype.ViewTemplate="%ModuleName%_ImportView",CImportView.prototype.onBind=function(){var e=_.map(Settings.ImportExportFormats,function(e){return"."+e});this.oJua=new CJua({action:"?/Api/",name:"jua-uploader",queueSize:1,clickElement:this.importButtonDom(),hiddenElementsPosition:UserSettings.IsRTL?"right":"left",disableAjaxUpload:!1,disableDragAndDrop:!0,disableMultiple:!0,hidden:_.extendOwn({Module:Settings.ServerModuleName,Method:"Import",Parameters:_.bind(function(){return JSON.stringify({GroupUUID:this.oParent.currentGroupUUID(),Storage:"personal"})},this)},App.getCommonRequestParameters()),accept:e.join(",")}),this.oJua.on("onSelect",_.bind(this.oParent.onImportSelect,this.oParent)).on("onStart",_.bind(this.onFileUploadStart,this)).on("onComplete",_.bind(this.onFileUploadComplete,this))},CImportView.prototype.onFileUploadStart=function(){this.importing(!0)},CImportView.prototype.onFileUploadComplete=function(e,t,o){this.importing(!1),this.oParent.onImportComplete(e,t,o)},module.exports=CImportView;