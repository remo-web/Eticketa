"use strict";function GetSizeParameters(){var e=window.screen.width,n=Math.ceil(e*iDefaultRatio),o=Math.ceil((e-n)/2),r=window.screen.height,i=Math.ceil(r*iDefaultRatio);return",width="+n+",height="+i+",top="+Math.ceil((r-i)/2)+",left="+o}var _=require("underscore"),$=require("jquery"),App=require("%PathToCoreWebclientModule%/js/App.js"),iDefaultRatio=.8,aOpenedWins=[];module.exports={openTab:function(e,n){$.cookie("aft-cache-ctrl","1");var o=window.open(e,"_blank");return o&&(o.focus(),o.name=n||(App.currentAccountId?App.currentAccountId():0),aOpenedWins.push(o)),o},open:function(e,n,o){var r="location=no,toolbar=no,status=no,scrollbars=yes,resizable=yes"+(o?",menubar=yes":",menubar=no"),i=null;return n=n.replace(/\W/g,""),r+=GetSizeParameters(),(i=window.open(e,n,r))&&(i.focus(),i.name=App.currentAccountId?App.currentAccountId():0,aOpenedWins.push(i)),i},isSameOrigin:function(e){var n="";try{n=e.location.origin}catch(e){console.log("The following error was catched:"),console.error(e)}return window.location.origin===n},getOpenedWindows:function(){return aOpenedWins=_.filter(aOpenedWins,function(e){return this.isSameOrigin(e)&&!e.closed}.bind(this))},closeAll:function(){_.each(aOpenedWins,function(e){e.closed||e.close()}),aOpenedWins=[]}};