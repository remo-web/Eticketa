"use strict";var $=require("jquery"),Types=require("%PathToCoreWebclientModule%/js/utils/Types.js"),Settings=require("%PathToCoreWebclientModule%/js/Settings.js"),I18n=window.auroraI18n,TextUtils={};TextUtils.encodeHtml=function(e){return e?e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},TextUtils.htmlStartsWithBlockquote=function(e){var a=e.split("<blockquote"),r=a.length>0?a[0]:"";return""===$.trim(r.replace(/<[^>]*>/g,""))},TextUtils.i18n=function(e,a,r,s){var t="",i=Types.isNonEmptyString(r)?r:e;if(Types.isNonEmptyString(e)&&(Types.isNonEmptyString(I18n[e])?i=I18n[e]:(e=e.replace("MobileWebclient".toUpperCase(),"Webclient".toUpperCase()),Types.isNonEmptyString(I18n[e])&&(i=I18n[e]))),Types.isPositiveNumber(s)&&(i=function(e,a){var r=TextUtils.getPlural(Settings.Language,e),s=a.split("|");return s&&s[r]?s[r]:s&&s[0]?s[0]:a}(s,i)),a)for(t in a)if(a.hasOwnProperty(t)){var n=new RegExp("%"+t+"%","g");i=i.replace(n,a[t])}return i},TextUtils.getPlural=function(e,a){var r=0;switch(a=Types.pInt(a),e){case"Arabic":r=0===a?0:1===a?1:2===a?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5;break;case"Bulgarian":r=1===a?0:1;break;case"Chinese-Simplified":r=0;break;case"Chinese-Traditional":r=1===a?0:1;break;case"Czech":r=1===a?0:a>=2&&a<=4?1:2;break;case"Danish":case"Dutch":case"English":case"Estonian":case"Finnish":case"French":case"German":case"Greek":case"Hebrew":case"Hungarian":case"Italian":r=1===a?0:1;break;case"Japanese":case"Korean":r=0;break;case"Latvian":r=a%10==1&&a%100!=11?0:0!==a?1:2;break;case"Lithuanian":r=a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2;break;case"Norwegian":r=1===a?0:1;break;case"Persian":r=0;break;case"Polish":r=1===a?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;break;case"Portuguese-Portuguese":case"Portuguese-Brazil":r=1===a?0:1;break;case"Romanian":r=1===a?0:0===a||a%100>0&&a%100<20?1:2;break;case"Russian":r=a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;break;case"Slovenian":r=a%10==1&&a%100!=11?0:a%10==2&&a%100!=12?1:2;break;case"Serbian":r=a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;break;case"Spanish":case"Swedish":r=1===a?0:1;break;case"Thai":r=0;break;case"Turkish":r=1===a?0:1;break;case"Ukrainian":r=a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2;break;case"Vietnamese":default:r=0}return r},TextUtils.getUrlFriendlyName=function(e){return e.replace(/([A-Z])/g,"-$1").replace(/(^-)/g,"").replace(/\s+/g,"-").replace(/-{2,}/g,"-").toLowerCase()},TextUtils.getFriendlySize=function(e){return(e=Types.pInt(e))>=1073741824?Types.roundNumber(e/1073741824,1)+TextUtils.i18n("%MODULENAME%/LABEL_GIGABYTES"):e>=1048576?Types.roundNumber(e/1048576,1)+TextUtils.i18n("%MODULENAME%/LABEL_MEGABYTES"):e>=1024?Types.roundNumber(e/1024,0)+TextUtils.i18n("%MODULENAME%/LABEL_KILOBYTES"):e+TextUtils.i18n("%MODULENAME%/LABEL_BYTES")},module.exports=TextUtils;