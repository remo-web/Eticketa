!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Split=t()}(this,function(){"use strict";var e=window,t=e.document,i="addEventListener",s="removeEventListener",n="getBoundingClientRect",r=function(){return!1},o=e.attachEvent&&!e[i],a=["","-webkit-","-moz-","-o-"].filter(function(e){var i=t.createElement("div");return i.style.cssText="width:"+e+"calc(9px)",!!i.style.length}).shift()+"calc",l=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(u,c){function h(e,t,i){var s=O(v,t,i);Object.keys(s).forEach(function(t){return e.style[t]=s[t]})}function z(e){var t=y[this.a],i=y[this.b],s=t.size+i.size;t.size=e/this.size*s,i.size=s-e/this.size*s,h(t.element,t.size,this.aGutterSize),h(i.element,i.size,this.bGutterSize)}function f(){var e=y[this.a].element,t=y[this.b].element;this.size=e[n]()[v]+t[n]()[v]+this.aGutterSize+this.bGutterSize,this.start=e[n]()[p]}function m(t){var n=y[this.a].element,o=y[this.b].element;!this.dragging&&c.onDragStart&&c.onDragStart(),t.preventDefault(),this.dragging=!0,this.move=function(e){var t;this.dragging&&((t="touches"in e?e.touches[0][d]-this.start:e[d]-this.start)<=y[this.a].minSize+k+this.aGutterSize?t=y[this.a].minSize+this.aGutterSize:t>=this.size-(y[this.b].minSize+k+this.bGutterSize)&&(t=this.size-(y[this.b].minSize+this.bGutterSize)),z.call(this,t),c.onDrag&&c.onDrag())}.bind(this),this.stop=function(){var t=y[this.a].element,i=y[this.b].element;this.dragging&&c.onDragEnd&&c.onDragEnd(),this.dragging=!1,e[s]("mouseup",this.stop),e[s]("touchend",this.stop),e[s]("touchcancel",this.stop),this.parent[s]("mousemove",this.move),this.parent[s]("touchmove",this.move),delete this.stop,delete this.move,t[s]("selectstart",r),t[s]("dragstart",r),i[s]("selectstart",r),i[s]("dragstart",r),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor=""}.bind(this),e[i]("mouseup",this.stop),e[i]("touchend",this.stop),e[i]("touchcancel",this.stop),this.parent[i]("mousemove",this.move),this.parent[i]("touchmove",this.move),n[i]("selectstart",r),n[i]("dragstart",r),o[i]("selectstart",r),o[i]("dragstart",r),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",this.gutter.style.cursor=L,this.parent.style.cursor=L,f.call(this)}function g(e){e.forEach(function(t,i){if(i>0){var s=C[i-1],n=y[s.a],r=y[s.b];n.size=e[i-1],r.size=t,h(n.element,n.size,s.aGutterSize),h(r.element,r.size,s.bGutterSize)}})}function S(){C.forEach(function(e){e.parent.removeChild(e.gutter),y[e.a].element.style[v]="",y[e.b].element.style[v]=""})}void 0===c&&(c={});var v,d,p,y,b=l(u[0]).parentNode,G=e.getComputedStyle(b).flexDirection,E=c.sizes||u.map(function(){return 100/u.length}),w=void 0!==c.minSize?c.minSize:100,D=Array.isArray(w)?w:u.map(function(){return w}),U=void 0!==c.gutterSize?c.gutterSize:10,k=void 0!==c.snapOffset?c.snapOffset:30,x=c.direction||"horizontal",L=c.cursor||("horizontal"===x?"ew-resize":"ns-resize"),M=c.gutter||function(e,i){var s=t.createElement("div");return s.className="gutter gutter-"+i,s},O=c.elementStyle||function(e,t,i){var s={};return"string"==typeof t||t instanceof String?s[e]=t:s[e]=o?t+"%":a+"("+t+"% - "+i+"px)",s},j=c.gutterStyle||function(e,t){return i={},i[e]=t+"px",i;var i};"horizontal"===x?(v="width",d="clientX",p="left"):"vertical"===x&&(v="height",d="clientY",p="top");var C=[];return y=u.map(function(e,t){var s,r={element:l(e),size:E[t],minSize:D[t]};if(t>0&&(s={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===u.length-1,direction:x,parent:b},s.aGutterSize=U,s.bGutterSize=U,s.isFirst&&(s.aGutterSize=U/2),s.isLast&&(s.bGutterSize=U/2),"row-reverse"===G||"column-reverse"===G)){var a=s.a;s.a=s.b,s.b=a}if(!o&&t>0){var c=M(t,x);!function(e,t){var i=j(v,t);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}(c,U),c[i]("mousedown",m.bind(s)),c[i]("touchstart",m.bind(s)),b.insertBefore(c,r.element),s.gutter=c}0===t||t===u.length-1?h(r.element,r.size,U/2):h(r.element,r.size,U);var z=r.element[n]()[v];return z<r.minSize&&(r.minSize=z),t>0&&C.push(s),r}),o?{setSizes:g,destroy:S}:{setSizes:g,getSizes:function(){return y.map(function(e){return e.size})},collapse:function(e){if(e===C.length){var t=C[e-1];f.call(t),o||z.call(t,t.size-t.bGutterSize)}else{var i=C[e];f.call(i),o||z.call(i,i.aGutterSize)}},destroy:S}}});