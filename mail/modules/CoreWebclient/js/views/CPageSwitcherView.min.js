"use strict";function CPageSwitcherView(e,t){this.bShown=!1,this.currentPage=ko.observable(1),this.count=ko.observable(e),this.perPage=ko.observable(t),this.firstPage=ko.observable(1),this.lastPage=ko.observable(1),this.pagesCount=ko.computed(function(){var e=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return e>0?e:1},this),ko.computed(function(){var e=20,t=4,i=this.pagesCount(),s=this.currentPage(),r=s,o=s;if(i>1)for(;e--,1<r&&(r--,t--),0!==t&&(i>o&&(o++,t--),0!==t)&&0!==e;);this.firstPage(r),this.lastPage(o)},this),this.visibleFirst=ko.computed(function(){return this.firstPage()>1},this),this.visibleLast=ko.computed(function(){return this.lastPage()<this.pagesCount()},this),this.clickPage=_.bind(this.clickPage,this),this.pages=ko.computed(function(){var e=this.firstPage(),t=[];if(this.firstPage()<this.lastPage())for(;e<=this.lastPage();e++)t.push({number:e,current:e===this.currentPage(),clickFunc:this.clickPage});return t},this),App.isMobile()||this.hotKeysBind()}var _=require("underscore"),$=require("jquery"),ko=require("knockout"),Utils=require("%PathToCoreWebclientModule%/js/utils/Common.js"),App=require("%PathToCoreWebclientModule%/js/App.js");CPageSwitcherView.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",CPageSwitcherView.prototype.hotKeysBind=function(){$(document).on("keydown",$.proxy(function(e){if(this.bShown&&!Utils.isTextFieldFocused()){var t=e.keyCode;e.ctrlKey&&t===Enums.Key.Left?this.clickPreviousPage():e.ctrlKey&&t===Enums.Key.Right&&this.clickNextPage()}},this))},CPageSwitcherView.prototype.hide=function(){this.bShown=!1},CPageSwitcherView.prototype.show=function(){this.bShown=!0},CPageSwitcherView.prototype.clear=function(){this.currentPage(1),this.count(0)},CPageSwitcherView.prototype.setCount=function(e){this.count(e),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},CPageSwitcherView.prototype.setPage=function(e,t){this.perPage(t),e>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(e)},CPageSwitcherView.prototype.clickPage=function(e){var t=e.number;t<1&&(t=1),t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},CPageSwitcherView.prototype.clickFirstPage=function(){this.currentPage(1)},CPageSwitcherView.prototype.clickPreviousPage=function(){var e=this.currentPage()-1;e<1&&(e=1),this.currentPage(e)},CPageSwitcherView.prototype.clickNextPage=function(){var e=this.currentPage()+1;e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},CPageSwitcherView.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},module.exports=CPageSwitcherView;