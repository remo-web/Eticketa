"use strict";function CHeaderView(){CAbstractScreenView.call(this,"%ModuleName%"),this.tabs=ModulesManager.getModulesTabs(!1),ko.computed(function(){_.each(this.tabs,function(e){if(e.isCurrent){var o="#"+Routing.currentHash(),t=_.isFunction(e.excludedHashes)&&_.isArray(e.excludedHashes())?e.excludedHashes():[],r=!!_.find(t,function(e){return 0===o.indexOf(e)}),i=0===o.indexOf(e.baseHash()+"/")||o===e.baseHash();e.isCurrent(!r&&(Screens.currentScreen()===e.sName||i)),e.isCurrent()&&i&&e.hash(o)}})},this).extend({rateLimit:50}),this.showLogout=App.getUserRole()!==window.Enums.UserRole.Anonymous&&!App.isPublic(),this.sLogoUrl=Settings.LogoUrl,this.bDebugMode=Settings.DebugMode,this.mobileDevice=Browser.mobileDevice,this.bShowMobileSwitcher=Browser.mobileDevice&&Settings.AllowMobile,App.broadcastEvent("%ModuleName%::ConstructView::after",{Name:this.ViewConstructorName,View:this}),_.isEmpty(this.tabs)&&!this.showLogout||$("#auroraContent > .screens").addClass("show-header")}var _=require("underscore"),$=require("jquery"),ko=require("knockout"),Ajax=require("%PathToCoreWebclientModule%/js/Ajax.js"),App=require("%PathToCoreWebclientModule%/js/App.js"),Browser=require("%PathToCoreWebclientModule%/js/Browser.js"),ModulesManager=require("%PathToCoreWebclientModule%/js/ModulesManager.js"),Routing=require("%PathToCoreWebclientModule%/js/Routing.js"),Settings=require("%PathToCoreWebclientModule%/js/Settings.js"),Screens=require("%PathToCoreWebclientModule%/js/Screens.js"),Popups=require("%PathToCoreWebclientModule%/js/Popups.js"),AlertPopup=require("%PathToCoreWebclientModule%/js/popups/AlertPopup.js"),CAbstractScreenView=require("%PathToCoreWebclientModule%/js/views/CAbstractScreenView.js");_.extendOwn(CHeaderView.prototype,CAbstractScreenView.prototype),CHeaderView.prototype.ViewTemplate="%ModuleName%_HeaderView",CHeaderView.prototype.ViewConstructorName="CHeaderView",CHeaderView.prototype.logout=function(){App.logout()},CHeaderView.prototype.debug=function(){var e={Info:[]};App.broadcastEvent("%ModuleName%::GetDebugInfo",e),Popups.showPopup(AlertPopup,[e.Info.join("<br />")])},CHeaderView.prototype.switchToFullVersion=function(){Ajax.send("Core","SetMobile",{Mobile:!1},function(e){e.Result&&window.location.reload()},this)},CHeaderView.prototype.switchToMobileVersion=function(){Ajax.send("Core","SetMobile",{Mobile:!0},function(e){e.Result&&window.location.reload()},this)},module.exports=new CHeaderView;