"use strict";function СAdminSettingsView(){CAbstractSettingsFormView.call(this,Settings.ServerModuleName),this.sFakePass="     ",this.host=ko.observable(Settings.CpanelHost),this.port=ko.observable(Settings.CpanelPort),this.user=ko.observable(Settings.CpanelUser),this.pass=ko.observable(Settings.CpanelHasPassword?this.sFakePass:"")}var _=require("underscore"),ko=require("knockout"),Ajax=require("%PathToCoreWebclientModule%/js/Ajax.js"),ModulesManager=require("%PathToCoreWebclientModule%/js/ModulesManager.js"),Types=require("%PathToCoreWebclientModule%/js/utils/Types.js"),CAbstractSettingsFormView=ModulesManager.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),Settings=require("modules/%ModuleName%/js/Settings.js");_.extendOwn(СAdminSettingsView.prototype,CAbstractSettingsFormView.prototype),СAdminSettingsView.prototype.ViewTemplate="%ModuleName%_AdminSettingsView",СAdminSettingsView.prototype.getCurrentValues=function(){return[this.host(),this.port(),this.user(),this.pass()]},СAdminSettingsView.prototype.revertGlobalValues=function(){this.host(Settings.CpanelHost),this.port(Settings.CpanelPort),this.user(Settings.CpanelUser),this.pass(Settings.CpanelHasPassword?this.sFakePass:"")},СAdminSettingsView.prototype.getParametersForSave=function(){return{CpanelHost:this.host(),CpanelPort:this.port(),CpanelUser:this.user(),CpanelPassword:this.pass()!==this.sFakePass?this.pass():""}},СAdminSettingsView.prototype.applySavedValues=function(e){Types.isPositiveNumber(this.iTenantId)||Settings.update(e)},СAdminSettingsView.prototype.setAccessLevel=function(e,t){this.visible(""===e||"Tenant"===e),this.iTenantId=t},СAdminSettingsView.prototype.onRouteChild=function(e){this.requestPerTenantSettings()},СAdminSettingsView.prototype.requestPerTenantSettings=function(){Types.isPositiveNumber(this.iTenantId)?(this.host(""),this.port(""),this.user(""),this.pass(""),Ajax.send(Settings.ServerModuleName,"GetSettings",{TenantId:this.iTenantId},function(e){e.Result&&(this.host(e.Result.CpanelHost),this.port(e.Result.CpanelPort),this.user(e.Result.CpanelUser),this.pass(e.Result.CpanelHasPassword?this.sFakePass:""),this.updateSavedState())},this)):this.revertGlobalValues()},СAdminSettingsView.prototype.applySavedValues=function(e){e.TenantId||Settings.updateAdmin(e.CpanelHost,e.CpanelPort,e.CpanelUser)},module.exports=new СAdminSettingsView;