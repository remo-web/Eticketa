"use strict";function CAdminSettingsView(){CAbstractSettingsFormView.call(this,Settings.ServerModuleName),this.enable=ko.observable(Settings.EnableModule),this.id=ko.observable(Settings.Id),this.secret=ko.observable(Settings.Secret),this.key=ko.observable(Settings.Key),this.scopes=ko.observable(Settings.getScopesCopy())}var _=require("underscore"),ko=require("knockout"),TextUtils=require("%PathToCoreWebclientModule%/js/utils/Text.js"),ModulesManager=require("%PathToCoreWebclientModule%/js/ModulesManager.js"),Screens=require("%PathToCoreWebclientModule%/js/Screens.js"),CAbstractSettingsFormView=ModulesManager.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),Settings=require("modules/%ModuleName%/js/Settings.js");_.extendOwn(CAdminSettingsView.prototype,CAbstractSettingsFormView.prototype),CAdminSettingsView.prototype.ViewTemplate="%ModuleName%_AdminSettingsView",CAdminSettingsView.prototype.getCurrentValues=function(){var e=_.map(this.scopes(),function(e){return e.Name+e.Value()});return[this.enable(),this.id(),this.secret(),this.key(),e]},CAdminSettingsView.prototype.revertGlobalValues=function(){this.enable(Settings.EnableModule),this.id(Settings.Id),this.secret(Settings.Secret),this.key(Settings.Key),this.scopes(Settings.getScopesCopy())},CAdminSettingsView.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()&&""!==this.key()||(Screens.showError(TextUtils.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},CAdminSettingsView.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Key:this.key(),Scopes:_.map(this.scopes(),function(e){return{Name:e.Name,Description:e.Description,Value:e.Value()}})}},CAdminSettingsView.prototype.applySavedValues=function(e){Settings.updateAdmin(e.EnableModule,e.Id,e.Secret,e.Key,e.Scopes)},CAdminSettingsView.prototype.setAccessLevel=function(e,t){this.visible(""===e)},module.exports=new CAdminSettingsView;