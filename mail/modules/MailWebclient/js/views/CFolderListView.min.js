"use strict";function CFolderListView(){this.folderList=MailCache.folderList,this.manageFoldersHash=ko.computed(function(){if(ModulesManager.isModuleEnabled("SettingsWebclient")){var e=AccountList.getCurrent();if(e)return Routing.buildHashFromArray(["settings","mail-accounts","account",e.hash(),"folders"])}return"#"},this),this.quotaProc=ko.observable(-1),this.quotaDesc=ko.observable(""),UserSettings.ShowQuotaBar&&ko.computed(function(){MailCache.quotaChangeTrigger();var e=AccountList.getCurrent(),t=e?e.quota():0,o=e?e.usedSpace():0,r=0<t?Math.ceil(o/t*100):-1;return r=100<r?100:r,this.quotaProc(r),this.quotaDesc(-1<r?TextUtils.i18n("COREWEBCLIENT/INFO_QUOTA",{PROC:r,QUOTA:TextUtils.getFriendlySize(1024*t)}):""),UserSettings.QuotaWarningPerc>0&&-1!==r&&UserSettings.QuotaWarningPerc>100-r&&Screens.showError(TextUtils.i18n("COREWEBCLIENT/WARNING_QUOTA_ALMOST_REACHED"),!0),!0},this),this.visibleNewFolderButton=ko.computed(function(){return Settings.AllowAddNewFolderOnMainScreen&&this.folderList().collection().length>0},this)}var ko=require("knockout"),TextUtils=require("%PathToCoreWebclientModule%/js/utils/Text.js"),ModulesManager=require("%PathToCoreWebclientModule%/js/ModulesManager.js"),Routing=require("%PathToCoreWebclientModule%/js/Routing.js"),Screens=require("%PathToCoreWebclientModule%/js/Screens.js"),UserSettings=require("%PathToCoreWebclientModule%/js/Settings.js"),Popups=require("%PathToCoreWebclientModule%/js/Popups.js"),CreateFolderPopup=require("modules/%ModuleName%/js/popups/CreateFolderPopup.js"),AccountList=require("modules/%ModuleName%/js/AccountList.js"),MailCache=require("modules/%ModuleName%/js/Cache.js"),Settings=require("modules/%ModuleName%/js/Settings.js");CFolderListView.prototype.ViewTemplate="%ModuleName%_FoldersView",CFolderListView.prototype.addNewFolder=function(){Popups.showPopup(CreateFolderPopup)},module.exports=CFolderListView;