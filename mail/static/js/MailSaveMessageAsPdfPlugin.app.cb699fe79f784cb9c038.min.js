(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"ciL+":function(t,e,n){"use strict";t.exports=function(t){var e=n("EVdn"),s=n("RN+F"),i=n("ZP6a"),a=n("o0Bx"),o=n("JFZZ"),c=n("IAk5");return c.isUserNormalOrTenant()?{start:function(t){c.subscribeEvent("MailWebclient::AddMoreSectionCommand",function(t){t({Text:s.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ACTION_DOWNLOAD_PDF"),CssClass:"pdf",Handler:function(){if(this.currentMessage()){var t=this.currentMessage().getDomText();e("img[data-x-src-cid]",t).each(function(){!function(t){try{var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),t.src=e.toDataURL("image/png")}catch(t){}}(this)}),a.send("MailSaveMessageAsPdfPlugin","GeneratePdfFile",{FileName:this.subject(),Html:t.html()},function(t){t.Result&&t.Result.Actions&&t.Result.Actions.download?i.downloadByUrl(t.Result.Actions.download.url):o.showErrorByCode(t,s.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ERROR_CREATING_PDF"))},this)}}})})}}:null}}}]);