(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Aybv:function(e,t,i){"use strict";function s(e){this.sServerModule=e||"Core",this.isSaving=a.observable(!1),this.visible=a.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}var n=i("F/us"),a=i("0h2I"),r=i("RN+F"),o=i("o0Bx"),h=i("JFZZ"),u=i("SQrT"),c=i("76Kh"),b=i("20Ah");s.prototype.ViewTemplate="",s.prototype.addSettingsSection=function(e){this.aSettingsSections.push(e)},s.prototype.showTab=function(e){this.bShown=!0,this.revert(),n.isFunction(this.onShow)&&this.onShow(e),n.each(this.aSettingsSections,function(t){n.isFunction(t.onShow)&&t.onShow(e)})},s.prototype.hasUnsavedChanges=function(){var e=this.getCurrentState()!==this.sSavedState;return n.each(this.aSettingsSections,function(t){n.isFunction(t.getCurrentState)&&(e=e||t.getCurrentState()!==t.sSavedState)}),e},s.prototype.hide=function(e,t){this.hasUnsavedChanges()?c.showPopup(b,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(i){i?(this.bShown=!1,e(),this.revert()):n.isFunction(t)&&t()},this)]):(this.bShown=!1,e())},s.prototype.getCurrentValues=function(){return[]},s.prototype.getCurrentState=function(){return this.getCurrentValues().join(":")},s.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},s.prototype.revertGlobalValues=function(){},s.prototype.revert=function(){n.each(this.aSettingsSections,function(e){n.isFunction(e.revert)&&e.revert()}),this.revertGlobalValues(),this.updateSavedState()},s.prototype.getParametersForSave=function(){return{}},s.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),o.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},s.prototype.applySavedValues=function(e){},s.prototype.onResponse=function(e,t){if(this.isSaving(!1),e.Result){var i=t.Parameters;this.updateSavedState(),this.applySavedValues(i),u.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else h.showErrorByCode(e,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},s.prototype.setAccessLevel=function(e,t){},e.exports=s},"Ig+v":function(e,t,i){function s(e){this.sName="",this.visible=n.observable(!0),this.baseHash=n.observable(""),this.hash=n.observable(""),this.linkText=n.observable(e),this.isCurrent=n.observable(!1),this.recivedAnim=n.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=n.observable(0),this.allowChangeTitle=n.observable(!1),this.inactiveTitle=n.observable(""),this.excludedHashes=n.observableArray([])}var n=i("0h2I"),a=i("QaF5");s.prototype.ViewTemplate="CoreWebclient_HeaderItemView",s.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(a.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=s},kdpN:function(e,t,i){"use strict";var s=i("F/us"),n=i("AFLV");e.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(e){var t=e.SettingsWebclient;s.isEmpty(t)||(this.TabsOrder=n.pArray(t.TabsOrder,this.TabsOrder))}}},nkxw:function(e,t,i){"use strict";e.exports=function(e){var t=i("IAk5"),s=t.getUserRole()===Enums.UserRole.SuperAdmin,n=null;if(s||t.isUserNormalOrTenant()){var a=i("kdpN");if(a.init(e),s)return{getAbstractSettingsFormViewClass:function(){return i("Aybv")}};if(t.isUserNormalOrTenant())return{getScreens:function(){var e={};return e[a.HashModuleName]=function(){return i("qrIc")},e},getHeaderItem:function(){if(null===n){var e=i("RN+F"),t=i("Ig+v");n=new t(e.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:n,name:a.HashModuleName}},registerSettingsTab:function(e,t,s){i("qrIc").registerTab(e,t,s)},registerSettingsTabSection:function(e,t,s){i("qrIc").registerTabSection(e,t,s)},getAbstractSettingsFormViewClass:function(){return i("Aybv")},setAddHash:function(e){i("qrIc").setAddHash(e)}}}return null}},qrIc:function(e,t,i){"use strict";function s(){u.call(this,"SettingsWebclient"),this.tabs=r.observableArray([]),this.currentTab=r.observable(null),o.subscribeEvent("OpenSettingTab",n.bind(function(e){this.changeTab(e.Name)},this)),o.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i("F/us"),a=i("EVdn"),r=i("0h2I"),o=i("IAk5"),h=i("QaF5"),u=i("xcwT"),c=i("kdpN"),b=a("html");n.extendOwn(s.prototype,u.prototype),s.prototype.ViewTemplate="SettingsWebclient_SettingsView",s.prototype.ViewConstructorName="CSettingsView",s.prototype.registerTab=function(e,t,i){var s=c.TabsOrder.length,a=e(),r=n.findWhere(this.tabs(),{name:t});n.isEmpty(a)||(a.SettingsTabName=t,a.SettingsTabTitle=i,r&&(n.isArray(r.sections)&&(n.each(r.sections,function(e){a.addSettingsSection(e)}),delete r.sections),r.view=a)),r||this.tabs.push({view:a,name:t}),this.tabs(n.sortBy(this.tabs(),function(e){var t=n.indexOf(c.TabsOrder,e.name);return-1!==t?t:s}))},s.prototype.registerTabSection=function(e,t){var i=n.findWhere(this.tabs(),{name:t}),s=e();i?i.view.addSettingsSection(s):(this.registerTab(function(){return{visible:r.observable(!1)}},t,""),(i=n.findWhere(this.tabs(),{name:t}))&&(n.isArray(i.sections)||(i.sections=[]),i.sections.push(s)))},s.prototype.hasUnsavedChanges=function(){var e=this.currentTab();return e&&e.view&&n.isFunction(e.view.hasUnsavedChanges)&&e.view.hasUnsavedChanges()},s.prototype.discardChanges=function(){var e=this.currentTab();e&&e.view&&n.isFunction(e.view.revert)&&e.view.revert()},s.prototype.onShow=function(){b.addClass("non-adjustable")},s.prototype.onHide=function(){var e=this.currentTab();e&&n.isFunction(e.view.hide)&&e.view.hide(function(){},function(){}),b.removeClass("non-adjustable")},s.prototype.onRoute=function(e){var t=e.shift(),i=this.currentTab(),s=n.find(this.tabs(),function(e){return e.name===t}),a=function(){s&&(n.isFunction(s.view.showTab)&&s.view.showTab(e),this.currentTab(s),s.name!==t&&h.replaceHashDirectly([c.HashModuleName,s.name]))}.bind(this),r=n.bind(function(){i&&h.replaceHashDirectly([c.HashModuleName,i.name])},this),o=!0;i&&t===i.name?n.isFunction(i.view.showTab)&&i.view.showTab(e):(s&&s.view.visible&&!s.view.visible()&&(s=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),s?i&&n.isFunction(i.view.hide)&&(i.view.hide(a,r),o=!1):i||(s=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),o&&a())},s.prototype.changeTab=function(e){h.setHash([c.HashModuleName,e])},s.prototype.setAddHash=function(e){h.setHash(n.union([c.HashModuleName,this.currentTab()?this.currentTab().name:""],e))},e.exports=new s}}]);