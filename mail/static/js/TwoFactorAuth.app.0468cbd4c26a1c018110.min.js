(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2xdY":function(t,o,s){"use strict";function e(){a.call(this),this.onConfirm=null,this.password=n.observable(""),this.inPropgress=n.observable(!1),this.action=""}var i=s("F/us"),n=s("0h2I"),r=s("SQrT"),h=s("RN+F"),a=s("czxF"),p=s("o0Bx");i.extendOwn(e.prototype,a.prototype),e.prototype.PopupTemplate="TwoFactorAuth_ConfirmPasswordPopup",e.prototype.onOpen=function(t,o){this.onConfirm=t,this.action=o},e.prototype.verifyPassword=function(){this.inPropgress(!0),p.send("TwoFactorAuth",this.action,{Password:this.password()},this.onGetVerifyResponse,this)},e.prototype.onGetVerifyResponse=function(t){t.Result?(i.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.password("")):r.showError(h.i18n("TWOFACTORAUTH/ERROR_WRONG_PASSWORD")),this.inPropgress(!1)},t.exports=new e},"7Lti":function(t,o,s){"use strict";var e=s("0h2I"),i=s("F/us"),n=s("AFLV");t.exports={ServerModuleName:"TwoFactorAuth",HashModuleName:"two-factor-auth",EnableTwoFactorAuth:e.observable(!0),init:function(t){var o=i.extend({},t[this.ServerModuleName]||{},t.TwoFactorAuth||{});i.isEmpty(o)||this.EnableTwoFactorAuth(n.pBool(o.EnableTwoFactorAuth,this.EnableTwoFactorAuth()))}}},PMya:function(t,o,s){"use strict";function e(){a.call(this,p.ServerModuleName),this.isEnabledTwoFactorAuth=n.observable(p.EnableTwoFactorAuth()),this.isPasswordVerified=n.observable(!1),this.isShowSecret=n.observable(!1),this.isValidatingPin=n.observable(!1),this.QRCodeSrc=n.observable(""),this.secret=n.observable(""),this.pin=n.observable("")}var i=s("F/us"),n=s("0h2I"),r=s("SQrT"),h=s("RN+F"),a=s("OgeD").run("SettingsWebclient","getAbstractSettingsFormViewClass"),p=s("7Lti"),c=s("76Kh"),u=s("2xdY"),l=s("o0Bx");i.extendOwn(e.prototype,a.prototype),e.prototype.ViewTemplate="TwoFactorAuth_TwoFactorAuthSettingsFormView",e.prototype.confirmePassword=function(){c.showPopup(u,[i.bind(this.onConfirmePassword,this),"EnableTwoFactorAuth"])},e.prototype.onConfirmePassword=function(t){t&&t.Result&&t.Result.Secret&&t.Result.QRcode&&(this.QRCodeSrc(t.Result.QRcode),this.secret(t.Result.Secret),this.isShowSecret(!0))},e.prototype.validatePin=function(){this.isValidatingPin(!0),l.send("TwoFactorAuth","TwoFactorAuthSave",{Pin:this.pin(),Secret:this.secret()},this.onValidatingPinResponse,this)},e.prototype.onValidatingPinResponse=function(t){this.isValidatingPin(!1),t&&t.Result?(this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!0)):r.showError(h.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN"))},e.prototype.disable=function(){c.showPopup(u,[i.bind(function(){this.QRCodeSrc(""),this.secret(""),this.pin(""),this.isShowSecret(!1),this.isEnabledTwoFactorAuth(!1)},this),"DisableTwoFactorAuth"])},t.exports=new e},Rr39:function(t,o,s){"use strict";var e=s("F/us"),i=s("IAk5"),n=s("RN+F"),r=s("7Lti");t.exports=function(t){return r.init(t),{start:function(t){t.run("SettingsWebclient","registerSettingsTab",[function(){return s("PMya")},r.HashModuleName,n.i18n("TWOFACTORAUTH/LABEL_SETTINGS_TAB")]),i.subscribeEvent("StandardLoginFormWebclient::ConstructView::after",function(t){var o=t.View,i=s("76Kh"),n=s("YI4A");if(o){var r=o.onSystemLoginResponse.bind(o);e.isFunction(r)||(r=o.onSystemLoginResponseBase.bind(o)),e.isFunction(r)||(r=function(){}),o.onSystemLoginResponse=function(t,o){t.Result&&t.Result.TwoFactorAuth&&t.Result.TwoFactorAuth.UserId?i.showPopup(n,[e.bind(this.onSystemLoginResponseBase,this),e.bind(function(){this.loading(!1)},this),t.Result.TwoFactorAuth.UserId]):r(t,o)}}})}}}},YI4A:function(t,o,s){"use strict";function e(){a.call(this),this.onConfirm=null,this.onCancel=null,this.pin=n.observable(""),this.inPropgress=n.observable(!1),this.UserId=null,this.pinFocused=n.observable(!1),this.isMobile=n.observable(c.isMobile()||!1)}var i=s("F/us"),n=s("0h2I"),r=s("SQrT"),h=s("RN+F"),a=s("czxF"),p=s("o0Bx"),c=s("IAk5");i.extendOwn(e.prototype,a.prototype),e.prototype.PopupTemplate="TwoFactorAuth_VerifyTokenPopup",e.prototype.onOpen=function(t,o,s){this.onConfirm=t,this.onCancel=o,this.UserId=s,this.pinFocused(!0)},e.prototype.verifyPin=function(){this.inPropgress(!0),p.send("TwoFactorAuth","VerifyPin",{Pin:this.pin(),UserId:this.UserId},this.onGetVerifyResponse,this)},e.prototype.onGetVerifyResponse=function(t){t.Result?(i.isFunction(this.onConfirm)&&this.onConfirm(t),this.closePopup(),this.pin("")):(r.showError(h.i18n("TWOFACTORAUTH/ERROR_WRONG_PIN")),this.pin("")),this.inPropgress(!1)},e.prototype.cancelPopup=function(){i.isFunction(this.onCancel)&&this.onCancel(!1),this.closePopup()},t.exports=new e}}]);