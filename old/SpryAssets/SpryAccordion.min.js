"undefined"==typeof Spry&&(window.Spry={}),Spry.Widget||(Spry.Widget={}),Spry.Widget.Accordion=function(t,e){this.element=this.getElement(t),this.defaultPanel=0,this.hoverClass="AccordionPanelTabHover",this.openClass="AccordionPanelOpen",this.closedClass="AccordionPanelClosed",this.focusedClass="AccordionFocused",this.enableAnimation=!0,this.enableKeyboardNavigation=!0,this.currentPanel=null,this.animator=null,this.hasFocus=null,this.previousPanelKeyCode=Spry.Widget.Accordion.KEY_UP,this.nextPanelKeyCode=Spry.Widget.Accordion.KEY_DOWN,this.useFixedPanelHeights=!0,this.fixedPanelHeight=0,Spry.Widget.Accordion.setOptions(this,e,!0),this.element&&this.attachBehaviors()},Spry.Widget.Accordion.prototype.getElement=function(t){return t&&"string"==typeof t?document.getElementById(t):t},Spry.Widget.Accordion.prototype.addClassName=function(t,e){!t||!e||t.className&&-1!=t.className.search(new RegExp("\\b"+e+"\\b"))||(t.className+=(t.className?" ":"")+e)},Spry.Widget.Accordion.prototype.removeClassName=function(t,e){!t||!e||t.className&&-1==t.className.search(new RegExp("\\b"+e+"\\b"))||(t.className=t.className.replace(new RegExp("\\s*\\b"+e+"\\b","g"),""))},Spry.Widget.Accordion.setOptions=function(t,e,n){if(e)for(var i in e)n&&void 0==e[i]||(t[i]=e[i])},Spry.Widget.Accordion.prototype.onPanelTabMouseOver=function(t,e){return e&&this.addClassName(this.getPanelTab(e),this.hoverClass),!1},Spry.Widget.Accordion.prototype.onPanelTabMouseOut=function(t,e){return e&&this.removeClassName(this.getPanelTab(e),this.hoverClass),!1},Spry.Widget.Accordion.prototype.openPanel=function(t){var e,n=this.currentPanel;if(!(e="number"==typeof t?this.getPanels()[t]:this.getElement(t))||n==e)return null;var i=n?this.getPanelContent(n):null,o=this.getPanelContent(e);return o?(this.useFixedPanelHeights&&!this.fixedPanelHeight&&(this.fixedPanelHeight=i.offsetHeight?i.offsetHeight:i.scrollHeight),this.enableAnimation?(this.animator&&this.animator.stop(),this.animator=new Spry.Widget.Accordion.PanelAnimator(this,e,{duration:this.duration,fps:this.fps,transition:this.transition}),this.animator.start()):(i&&(i.style.display="none",i.style.height="0px"),o.style.display="block",o.style.height=this.useFixedPanelHeights?this.fixedPanelHeight+"px":"auto"),n&&(this.removeClassName(n,this.openClass),this.addClassName(n,this.closedClass)),this.removeClassName(e,this.closedClass),this.addClassName(e,this.openClass),this.currentPanel=e,e):null},Spry.Widget.Accordion.prototype.closePanel=function(){if(!this.useFixedPanelHeights&&this.currentPanel){var t=this.currentPanel,e=this.getPanelContent(t);e&&(this.enableAnimation?(this.animator&&this.animator.stop(),this.animator=new Spry.Widget.Accordion.PanelAnimator(this,null,{duration:this.duration,fps:this.fps,transition:this.transition}),this.animator.start()):(e.style.display="none",e.style.height="0px")),this.removeClassName(t,this.openClass),this.addClassName(t,this.closedClass),this.currentPanel=null}},Spry.Widget.Accordion.prototype.openNextPanel=function(){return this.openPanel(this.getCurrentPanelIndex()+1)},Spry.Widget.Accordion.prototype.openPreviousPanel=function(){return this.openPanel(this.getCurrentPanelIndex()-1)},Spry.Widget.Accordion.prototype.openFirstPanel=function(){return this.openPanel(0)},Spry.Widget.Accordion.prototype.openLastPanel=function(){var t=this.getPanels();return this.openPanel(t[t.length-1])},Spry.Widget.Accordion.prototype.onPanelTabClick=function(t,e){return e!=this.currentPanel?this.openPanel(e):this.closePanel(),this.enableKeyboardNavigation&&this.focus(),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1},Spry.Widget.Accordion.prototype.onFocus=function(t){return this.hasFocus=!0,this.addClassName(this.element,this.focusedClass),!1},Spry.Widget.Accordion.prototype.onBlur=function(t){return this.hasFocus=!1,this.removeClassName(this.element,this.focusedClass),!1},Spry.Widget.Accordion.KEY_UP=38,Spry.Widget.Accordion.KEY_DOWN=40,Spry.Widget.Accordion.prototype.onKeyDown=function(t){var e=t.keyCode;if(!this.hasFocus||e!=this.previousPanelKeyCode&&e!=this.nextPanelKeyCode)return!0;var n=this.getPanels();if(!n||n.length<1)return!1;for(var i=this.currentPanel?this.currentPanel:n[0],o=e==this.nextPanelKeyCode?i.nextSibling:i.previousSibling;o&&1!=o.nodeType;)o=e==this.nextPanelKeyCode?o.nextSibling:o.previousSibling;return o&&i!=o&&this.openPanel(o),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1},Spry.Widget.Accordion.prototype.attachPanelHandlers=function(t){if(t){var e=this.getPanelTab(t);if(e){var n=this;Spry.Widget.Accordion.addEventListener(e,"click",function(e){return n.onPanelTabClick(e,t)},!1),Spry.Widget.Accordion.addEventListener(e,"mouseover",function(e){return n.onPanelTabMouseOver(e,t)},!1),Spry.Widget.Accordion.addEventListener(e,"mouseout",function(e){return n.onPanelTabMouseOut(e,t)},!1)}}},Spry.Widget.Accordion.addEventListener=function(t,e,n,i){try{t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n)}catch(t){}},Spry.Widget.Accordion.prototype.initPanel=function(t,e){var n=this.getPanelContent(t);e?(this.currentPanel=t,this.removeClassName(t,this.closedClass),this.addClassName(t,this.openClass),n&&(this.useFixedPanelHeights?this.fixedPanelHeight&&(n.style.height=this.fixedPanelHeight+"px"):n.style.height="auto")):(this.removeClassName(t,this.openClass),this.addClassName(t,this.closedClass),n&&(n.style.height="0px",n.style.display="none")),this.attachPanelHandlers(t)},Spry.Widget.Accordion.prototype.attachBehaviors=function(){for(var t=this.getPanels(),e=0;e<t.length;e++)this.initPanel(t[e],e==this.defaultPanel);if(this.enableKeyboardNavigation=this.enableKeyboardNavigation&&this.element.attributes.getNamedItem("tabindex"),this.enableKeyboardNavigation){var n=this;Spry.Widget.Accordion.addEventListener(this.element,"focus",function(t){return n.onFocus(t)},!1),Spry.Widget.Accordion.addEventListener(this.element,"blur",function(t){return n.onBlur(t)},!1),Spry.Widget.Accordion.addEventListener(this.element,"keydown",function(t){return n.onKeyDown(t)},!1)}},Spry.Widget.Accordion.prototype.getPanels=function(){return this.getElementChildren(this.element)},Spry.Widget.Accordion.prototype.getCurrentPanel=function(){return this.currentPanel},Spry.Widget.Accordion.prototype.getPanelIndex=function(t){for(var e=this.getPanels(),n=0;n<e.length;n++)if(t==e[n])return n;return-1},Spry.Widget.Accordion.prototype.getCurrentPanelIndex=function(){return this.getPanelIndex(this.currentPanel)},Spry.Widget.Accordion.prototype.getPanelTab=function(t){return t?this.getElementChildren(t)[0]:null},Spry.Widget.Accordion.prototype.getPanelContent=function(t){return t?this.getElementChildren(t)[1]:null},Spry.Widget.Accordion.prototype.getElementChildren=function(t){for(var e=[],n=t.firstChild;n;)1==n.nodeType&&e.push(n),n=n.nextSibling;return e},Spry.Widget.Accordion.prototype.focus=function(){this.element&&this.element.focus&&this.element.focus()},Spry.Widget.Accordion.prototype.blur=function(){this.element&&this.element.blur&&this.element.blur()},Spry.Widget.Accordion.PanelAnimator=function(t,e,n){this.timer=null,this.interval=0,this.fps=60,this.duration=500,this.startTime=0,this.transition=Spry.Widget.Accordion.PanelAnimator.defaultTransition,this.onComplete=null,this.panel=e,this.panelToOpen=t.getElement(e),this.panelData=[],this.useFixedPanelHeights=t.useFixedPanelHeights,Spry.Widget.Accordion.setOptions(this,n,!0),this.interval=Math.floor(1e3/this.fps);for(var i=t.getPanels(),o=0;o<i.length;o++){var s=i[o],r=t.getPanelContent(s);if(r){var a=r.offsetHeight;if(void 0==a&&(a=0),s==e&&0==a&&(r.style.display="block"),s==e||a>0){var l=new Object;l.panel=s,l.content=r,l.fromHeight=a,l.toHeight=s==e?t.useFixedPanelHeights?t.fixedPanelHeight:r.scrollHeight:0,l.distance=l.toHeight-l.fromHeight,l.overflow=r.style.overflow,this.panelData.push(l),r.style.overflow="hidden",r.style.height=a+"px"}}}},Spry.Widget.Accordion.PanelAnimator.defaultTransition=function(t,e,n,i){return t/=i,e+(2-t)*t*n},Spry.Widget.Accordion.PanelAnimator.prototype.start=function(){var t=this;this.startTime=(new Date).getTime(),this.timer=setTimeout(function(){t.stepAnimation()},this.interval)},Spry.Widget.Accordion.PanelAnimator.prototype.stop=function(){if(this.timer)for(clearTimeout(this.timer),i=0;i<this.panelData.length;i++)obj=this.panelData[i],obj.content.style.overflow=obj.overflow;this.timer=null},Spry.Widget.Accordion.PanelAnimator.prototype.stepAnimation=function(){var t,e,n=(new Date).getTime()-this.startTime;if(n>=this.duration){for(t=0;t<this.panelData.length;t++)(e=this.panelData[t]).panel!=this.panel&&(e.content.style.display="none",e.content.style.height="0px"),e.content.style.overflow=e.overflow,e.content.style.height=this.useFixedPanelHeights||0==e.toHeight?e.toHeight+"px":"auto";this.onComplete&&this.onComplete()}else{for(t=0;t<this.panelData.length;t++){e=this.panelData[t];var i=this.transition(n,e.fromHeight,e.distance,this.duration);e.content.style.height=(i<0?0:i)+"px"}var o=this;this.timer=setTimeout(function(){o.stepAnimation()},this.interval)}};